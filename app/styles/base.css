/* ==========================================================================
   CSS Architecture: CUBE CSS Methodology
   Layers: reset → tokens → global → composition → blocks → utilities → exceptions
   ========================================================================== */

@layer reset, tokens, global, composition, blocks, utilities, exceptions;

/* ==========================================================================
   RESET LAYER - Modern CSS Reset (Andy Bell's approach)
   ========================================================================== */

@layer reset {
  /* Box sizing rules */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* Remove default margin and padding */
  * {
    margin: 0;
    padding: 0;
  }

  /* Allow percentage-based heights in the application */
  html,
  body {
    height: 100%;
  }

  /* Improve text rendering */
  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  /* Improve media defaults */
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Remove built-in form typography styles */
  input,
  button,
  textarea,
  select {
    font: inherit;
  }

  /* Avoid text overflows */
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
  }

  /* Create a root stacking context */
  #root,
  #__next {
    isolation: isolate;
  }
}

/* ==========================================================================
   TOKENS LAYER - Design tokens (Primitive + Semantic)
   Following Adam Argyle's Open Props methodology
   ========================================================================== */

@layer tokens {
  :root {
    /* -------------------------
       PRIMITIVE TOKENS
       Raw design values
       ------------------------- */

    /* NoDa Brand Colors */
    --noda-off-white: #FDFAF4;
    --noda-blue: #095078;
    --noda-palet-blue: #0197E6;
    --noda-line-dance-purple: #AE18F4;
    --noda-dark-purple: #4D00AB;
    --noda-rumba-red: #FF4D00;
    --noda-yellow: #F4DE18;
    --noda-pink: #F53FE3;

    /* Warm Neutral Scale (Scandinavian palette) */
    --warm-0: hsl(42, 60%, 97%);   /* #FDFAF4 - page bg (same as off-white) */
    --warm-1: hsl(38, 35%, 95%);   /* #F8F4ED - elevated surfaces */
    --warm-2: hsl(35, 28%, 92%);   /* #F2ECE3 - muted surfaces */
    --warm-3: hsl(32, 25%, 87%);   /* #E8E0D4 - light borders */
    --warm-4: hsl(30, 22%, 80%);   /* #D9CFC0 - medium borders */
    --warm-5: hsl(28, 15%, 66%);   /* #B8A99A - strong borders */

    /* NoDa Blue Scale (interactive states only) */
    --noda-blue-5: hsl(200, 85%, 25%);   /* primary */
    --noda-blue-6: hsl(200, 90%, 20%);   /* hover */
    --noda-blue-7: hsl(200, 95%, 15%);   /* active */

    /* Spacing Scale (4px base) */
    --size-1: 0.25rem;   /* 4px */
    --size-2: 0.5rem;    /* 8px */
    --size-3: 0.75rem;   /* 12px */
    --size-4: 1rem;      /* 16px */
    --size-5: 1.25rem;   /* 20px */
    --size-6: 1.5rem;    /* 24px */
    --size-7: 1.75rem;   /* 28px */
    --size-8: 2rem;      /* 32px */
    --size-12: 3rem;     /* 48px */
    --size-16: 4rem;     /* 64px */

    /* Typography Scale - 1.25 ratio (Major Second) */
    --text-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);     /* 12-14px */
    --text-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);       /* 14-16px */
    --text-base: clamp(1rem, 0.925rem + 0.375vw, 1.125rem);   /* 16-18px */
    --text-lg: clamp(1.25rem, 1.15rem + 0.5vw, 1.5rem);       /* 20-24px */
    --text-xl: clamp(1.5rem, 1.35rem + 0.75vw, 1.875rem);     /* 24-30px */
    --text-2xl: clamp(2rem, 1.8rem + 1vw, 2.5rem);            /* 32-40px */

    /* Border Radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;

    /* -------------------------
       SEMANTIC TOKENS
       Contextual usage mapping
       ------------------------- */

    /* Surface Colors */
    --color-surface: var(--warm-0);
    --color-surface-elevated: var(--warm-1);
    --color-surface-muted: var(--warm-2);

    /* Text Colors - ALL use NoDa blue */
    --color-text: var(--noda-blue);
    --color-text-muted: var(--noda-blue);
    --color-text-on-primary: var(--noda-off-white);

    /* Interactive Colors */
    --color-primary: var(--noda-blue);
    --color-primary-hover: var(--noda-blue-6);
    --color-secondary: var(--warm-2);
    --color-secondary-hover: var(--warm-3);
    --color-accent: var(--warm-1);

    /* Border Colors */
    --color-border: var(--warm-4);
    --color-border-muted: var(--warm-3);

    /* Focus Ring */
    --color-ring: var(--noda-blue);

    /* Form state colors */
    --color-disabled: hsl(30, 10%, 70%);
    --color-disabled-bg: hsl(38, 20%, 95%);
    --color-placeholder: hsl(30, 20%, 55%);

    /* Semantic Spacing */
    --space-block: var(--size-4);
    --space-inline: var(--size-2);
    --space-gutter: var(--size-6);
    --space-section: var(--size-8);

    /* Component Defaults */
    --radius: var(--radius-md);

    /* Legacy token aliases (for backwards compatibility during transition) */
    --background: var(--color-surface);
    --card: var(--color-surface-elevated);
    --foreground: var(--color-text);
    --card-foreground: var(--color-text);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-text-on-primary);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-text);
    --muted: var(--color-surface-muted);
    --muted-foreground: var(--color-text-muted);
    --border: var(--color-border);
    --input: var(--color-border);
    --ring: var(--color-ring);
    --accent: var(--color-accent);
    --hover-primary: var(--color-primary-hover);
    --hover-secondary: var(--color-secondary-hover);

  }
}

/* ==========================================================================
   GLOBAL LAYER - Base element styles
   ========================================================================== */

@layer global {
  body {
    background-color: var(--color-surface);
    color: var(--color-text);
    font-family: 'Roboto', Arial, sans-serif;
    line-height: 1.5;
  }

  /* Focus styles using focus-visible */
  :focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* Remove default focus styles */
  :focus:not(:focus-visible) {
    outline: none;
  }

  /* Hide number input spinners */
  input[type='number']::-webkit-inner-spin-button,
  input[type='number']::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }
}

/* ==========================================================================
   BLOCKS LAYER - Component styles (Kevin Powell's custom property hooks)
   ========================================================================== */

@layer blocks {
  /* Container */
  .container {
    --_container-max: var(--container-max, 1400px);
    --_container-padding: var(--container-padding, var(--size-4));

    max-width: var(--_container-max);
    margin-inline: auto;
    padding: var(--_container-padding);
  }

  /* Card Component */
  .card {
    --_card-bg: var(--card-bg, var(--color-surface-elevated));
    --_card-padding: var(--card-padding, var(--size-6));
    --_card-radius: var(--card-radius, var(--radius));

    background-color: var(--_card-bg);
    color: var(--color-text);
    border-radius: var(--_card-radius);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: var(--_card-padding);
  }

  /* Button Base */
  .btn {
    --_btn-radius: var(--btn-radius, var(--radius));

    padding: clamp(0.75rem, 2vw, 1rem);
    border-radius: var(--_btn-radius);
    font-weight: 600;
    font-size: clamp(0.85rem, 1.5vw, 1rem);
    height: clamp(3rem, 8vw, 3.5rem);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    cursor: pointer;
    border: 2px solid var(--color-primary);
    outline: none;
  }

  .btn:focus {
    box-shadow: 0 0 0 2px var(--color-surface), 0 0 0 4px var(--color-primary);
  }

  /* Button Variants */
  .btn-primary {
    background-color: var(--color-primary);
    color: var(--color-text-on-primary);
  }

  .btn-primary:hover {
    background-color: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
  }

  .btn-secondary {
    background-color: var(--color-surface);
    color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .btn-secondary:hover {
    background-color: var(--color-primary);
    color: var(--color-text-on-primary);
    border-color: var(--color-primary);
  }

  /* Button disabled states */
  .btn:disabled {
    background-color: var(--color-disabled-bg);
    border-color: var(--color-disabled);
    color: var(--color-disabled);
    cursor: not-allowed;
    opacity: 0.6;
  }

  .btn:disabled:hover {
    background-color: var(--color-disabled-bg);
    border-color: var(--color-disabled);
  }

  /* Button active states */
  .btn:active:not(:disabled) {
    transform: translateY(1px);
  }

  .btn-primary:active:not(:disabled) {
    background-color: var(--noda-blue-7);
  }

  .btn-secondary:active:not(:disabled) {
    background-color: var(--warm-3);
  }

  /* Form Elements */
  .input,
  .select,
  .styled-select {
    background-color: var(--color-surface);
    border: 2px solid var(--color-border);
    border-radius: var(--radius);
    padding: var(--size-3);
    width: 100%;
    margin-bottom: var(--size-4);
    color: var(--color-text);
    appearance: none;
    transition:
      border-color 0.15s ease,
      box-shadow 0.15s ease,
      background-color 0.15s ease;
  }

  .input:focus,
  .select:focus,
  .styled-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px hsl(200 85% 25% / 0.2);
  }

  /* Hover states */
  .input:hover:not(:disabled):not(:focus),
  .select:hover:not(:disabled):not(:focus),
  .styled-select:hover:not(:disabled):not(:focus) {
    border-color: var(--color-primary);
    background-color: var(--warm-1);
  }

  /* Placeholder styling */
  .input::placeholder,
  .styled-select::placeholder {
    color: var(--color-placeholder);
    opacity: 1;
  }

  .input:focus::placeholder {
    opacity: 0.5;
  }

  /* Disabled states */
  .input:disabled,
  .select:disabled,
  .styled-select:disabled {
    background-color: var(--color-disabled-bg);
    border-color: var(--color-disabled);
    color: var(--color-disabled);
    cursor: not-allowed;
    opacity: 0.7;
  }

  /* Active states */
  .input:active:not(:disabled),
  .styled-select:active:not(:disabled) {
    transform: scale(0.995);
  }

  .styled-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  /* Form Layout */
  .form {
    display: grid;
    gap: var(--size-6);
  }

  .input-group {
    display: grid;
    gap: var(--size-2);
    margin-bottom: var(--size-4);
  }

  .label {
    font-weight: 500;
    color: var(--color-text);
    margin-bottom: var(--size-2);
    transition: color 0.15s ease;
  }

  /* Focus-within for input groups */
  .input-group:focus-within .label {
    color: var(--color-primary);
  }

  /* Separator */
  .separator {
    height: 1px;
    background-color: var(--color-border);
    margin: var(--size-8) 0;
  }

  /* Typography Blocks */
  .title {
    font-size: var(--text-2xl);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: var(--size-4);
  }

  .description {
    font-size: var(--text-xl);
    font-weight: 500;
    line-height: 1.3;
    color: var(--color-text-muted);
    margin-bottom: var(--size-8);
  }

  .card-title {
    font-size: var(--text-lg);
    font-weight: 600;
    line-height: 1.4;
    margin-bottom: var(--size-4);
  }

  /* Result Display */
  .total-salary-value {
    font-size: var(--text-lg);
    font-weight: 500;
    line-height: 1.3;
    color: var(--color-text);
  }

  .total-salary-breakdown {
    font-size: var(--text-sm);
    line-height: 1.5;
  }

  .result-section {
    padding: var(--size-4);
    margin-bottom: var(--size-3);
    background-color: var(--color-surface);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--color-border-muted);
  }

  .result-section:last-of-type {
    margin-bottom: 0;
  }

  .result-subtitle {
    font-size: var(--text-sm);
    font-weight: 500;
    line-height: 1.4;
    color: var(--color-text-muted);
    margin-bottom: var(--size-1);
  }

  .result-value {
    font-size: var(--text-base);
    font-weight: 500;
    line-height: 1.4;
    margin-bottom: var(--size-1);
  }

  .result-explanation {
    font-size: var(--text-sm);
    line-height: 1.5;
    color: var(--color-text-muted);
    margin-bottom: 0;
  }

  /* Lists */
  .social-costs-list {
    list-style-type: none;
    padding-left: 0;
  }

  .social-costs-item {
    margin-bottom: var(--size-3);
  }

  .calculator-content {
    margin-top: 0;
  }
}

/* ==========================================================================
   UTILITIES LAYER - Single-purpose helpers from tokens
   ========================================================================== */

@layer utilities {
  /* Screen reader only - visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Spacing utilities */
  .mt-1 { margin-top: var(--size-1); }
  .mt-2 { margin-top: var(--size-2); }
  .mt-3 { margin-top: var(--size-3); }
  .mt-4 { margin-top: var(--size-4); }
  .mt-6 { margin-top: var(--size-6); }
  .mt-8 { margin-top: var(--size-8); }

  .mb-1 { margin-bottom: var(--size-1); }
  .mb-2 { margin-bottom: var(--size-2); }
  .mb-3 { margin-bottom: var(--size-3); }
  .mb-4 { margin-bottom: var(--size-4); }
  .mb-6 { margin-bottom: var(--size-6); }
  .mb-8 { margin-bottom: var(--size-8); }

  .p-2 { padding: var(--size-2); }
  .p-4 { padding: var(--size-4); }
  .p-6 { padding: var(--size-6); }

  /* Text utilities */
  .text-center { text-align: center; }
  .text-muted { color: var(--color-text-muted); }
  .text-primary { color: var(--color-primary); }
  .font-semibold { font-weight: 600; }
  .font-bold { font-weight: 700; }

  /* Layout utilities */
  .w-full { width: 100%; }
}

/* ==========================================================================
   EXCEPTIONS LAYER - Media queries and edge cases
   ========================================================================== */

@layer exceptions {
  @media (prefers-reduced-motion: reduce) {
    .input,
    .select,
    .styled-select,
    .btn,
    .label {
      transition: none;
    }
  }
}
