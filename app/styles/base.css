/* ==========================================================================
   CSS Architecture: CUBE CSS Methodology
   Layers: reset → tokens → global → composition → blocks → utilities → exceptions
   ========================================================================== */

@layer reset, tokens, global, composition, blocks, utilities, exceptions;

/* ==========================================================================
   RESET LAYER - Modern CSS Reset (Andy Bell's approach)
   ========================================================================== */

@layer reset {
  /* Box sizing rules */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* Remove default margin and padding */
  * {
    margin: 0;
    padding: 0;
  }

  /* Allow percentage-based heights in the application */
  html,
  body {
    height: 100%;
  }

  /* Improve text rendering */
  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  /* Improve media defaults */
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Remove built-in form typography styles */
  input,
  button,
  textarea,
  select {
    font: inherit;
  }

  /* Avoid text overflows */
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
  }

  /* Create a root stacking context */
  #root,
  #__next {
    isolation: isolate;
  }
}

/* ==========================================================================
   TOKENS LAYER - Design tokens (Primitive + Semantic)
   Following Adam Argyle's Open Props methodology
   ========================================================================== */

@layer tokens {
  :root {
    /* -------------------------
       PRIMITIVE TOKENS
       Raw design values
       ------------------------- */

    /* Color Primitives (HSL Scale) */
    --purple-0: hsl(280, 50%, 98%);
    --purple-1: hsl(280, 50%, 95%);
    --purple-2: hsl(280, 40%, 85%);
    --purple-3: hsl(280, 30%, 80%);
    --purple-4: hsl(280, 60%, 60%);
    --purple-5: hsl(280, 60%, 30%);
    --purple-6: hsl(280, 65%, 25%);
    --purple-7: hsl(280, 60%, 25%);
    --purple-8: hsl(280, 60%, 10%);

    /* Spacing Scale (4px base) */
    --size-1: 0.25rem;   /* 4px */
    --size-2: 0.5rem;    /* 8px */
    --size-3: 0.75rem;   /* 12px */
    --size-4: 1rem;      /* 16px */
    --size-6: 1.5rem;    /* 24px */
    --size-8: 2rem;      /* 32px */
    --size-12: 3rem;     /* 48px */
    --size-16: 4rem;     /* 64px */

    /* Typography Scale - Fluid (Jen Simmons' intrinsic design) */
    --text-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
    --text-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
    --text-lg: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
    --text-xl: clamp(1.75rem, 1.5rem + 1.25vw, 2.25rem);
    --text-2xl: clamp(2.5rem, 2.25rem + 1.5vw, 3.25rem);

    /* Border Radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;

    /* -------------------------
       SEMANTIC TOKENS
       Contextual usage mapping
       ------------------------- */

    /* Surface Colors */
    --color-surface: var(--purple-1);
    --color-surface-elevated: var(--purple-0);
    --color-surface-muted: var(--purple-3);

    /* Text Colors */
    --color-text: var(--purple-8);
    --color-text-muted: var(--purple-7);
    --color-text-on-primary: var(--purple-0);

    /* Interactive Colors */
    --color-primary: var(--purple-5);
    --color-primary-hover: var(--purple-6);
    --color-secondary: var(--purple-3);
    --color-secondary-hover: hsl(280, 35%, 75%);
    --color-accent: var(--purple-2);

    /* Border Colors */
    --color-border: var(--purple-4);
    --color-border-muted: var(--purple-3);

    /* Focus Ring */
    --color-ring: var(--purple-5);

    /* Semantic Spacing */
    --space-block: var(--size-4);
    --space-inline: var(--size-2);
    --space-gutter: var(--size-6);
    --space-section: var(--size-8);

    /* Component Defaults */
    --radius: var(--radius-md);

    /* Legacy token aliases (for backwards compatibility during transition) */
    --background: var(--color-surface);
    --card: var(--color-surface-elevated);
    --foreground: var(--color-text);
    --card-foreground: var(--color-text);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-text-on-primary);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-text);
    --muted: var(--color-surface-muted);
    --muted-foreground: var(--color-text-muted);
    --border: var(--color-border);
    --input: var(--color-border);
    --ring: var(--color-ring);
    --accent: var(--color-accent);
    --hover-primary: var(--color-primary-hover);
    --hover-secondary: var(--color-secondary-hover);

    /* Legacy spacing aliases */
    --spacing-1: var(--size-1);
    --spacing-2: var(--size-2);
    --spacing-3: var(--size-3);
    --spacing-4: var(--size-4);
    --spacing-6: var(--size-6);
    --spacing-8: var(--size-8);
    --spacing-12: var(--size-12);
    --spacing-16: var(--size-16);

    /* Legacy typography aliases */
    --font-size-sm: var(--text-sm);
    --font-size-base: var(--text-base);
    --font-size-lg: var(--text-lg);
    --font-size-xl: var(--text-xl);
    --font-size-2xl: var(--text-2xl);
  }
}

/* ==========================================================================
   GLOBAL LAYER - Base element styles
   ========================================================================== */

@layer global {
  body {
    background-color: var(--color-surface);
    color: var(--color-text);
    font-family: 'Inter', system-ui, sans-serif;
    line-height: 1.5;
  }

  /* Focus styles using focus-visible */
  :focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }

  /* Remove default focus styles */
  :focus:not(:focus-visible) {
    outline: none;
  }

  /* Hide number input spinners */
  input[type='number']::-webkit-inner-spin-button,
  input[type='number']::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }
}

/* ==========================================================================
   BLOCKS LAYER - Component styles (Kevin Powell's custom property hooks)
   ========================================================================== */

@layer blocks {
  /* Container */
  .container {
    --_container-max: var(--container-max, 1400px);
    --_container-padding: var(--container-padding, var(--size-4));

    max-width: var(--_container-max);
    margin-inline: auto;
    padding: var(--_container-padding);
  }

  /* Card Component */
  .card {
    --_card-bg: var(--card-bg, var(--color-surface-elevated));
    --_card-padding: var(--card-padding, var(--size-6));
    --_card-radius: var(--card-radius, var(--radius));

    background-color: var(--_card-bg);
    color: var(--color-text);
    border-radius: var(--_card-radius);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: var(--_card-padding);
  }

  /* Button Base */
  .btn {
    --_btn-padding-block: var(--btn-padding-block, var(--size-2));
    --_btn-padding-inline: var(--btn-padding-inline, var(--size-4));
    --_btn-radius: var(--btn-radius, var(--radius));

    padding: var(--_btn-padding-block) var(--_btn-padding-inline);
    border-radius: var(--_btn-radius);
    font-weight: 600;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    cursor: pointer;
    border: 2px solid var(--color-primary);
    outline: none;
  }

  .btn:focus {
    box-shadow: 0 0 0 2px var(--color-surface), 0 0 0 4px var(--color-primary);
  }

  /* Button Variants */
  .btn-primary {
    background-color: var(--color-primary);
    color: var(--color-text-on-primary);
  }

  .btn-primary:hover {
    background-color: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
  }

  .btn-secondary {
    background-color: var(--color-secondary);
    color: var(--color-text);
    border-color: var(--color-border);
  }

  .btn-secondary:hover {
    background-color: var(--color-accent);
    border-color: var(--color-primary-hover);
  }

  /* Form Elements */
  .input,
  .select,
  .styled-select {
    background-color: var(--color-surface);
    border: 2px solid var(--color-border);
    border-radius: var(--radius);
    padding: var(--size-2);
    width: 100%;
    margin-bottom: var(--size-3);
    color: var(--color-text);
    appearance: none;
  }

  .input:focus,
  .select:focus,
  .styled-select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px hsl(280 60% 30% / 0.2);
  }

  .styled-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  /* Form Layout */
  .form {
    display: grid;
    gap: var(--size-6);
  }

  .input-group {
    display: grid;
    gap: var(--size-1);
    margin-bottom: var(--size-4);
  }

  .label {
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: var(--size-1);
  }

  /* Separator */
  .separator {
    height: 1px;
    background-color: var(--color-border);
    margin: var(--size-8) 0;
  }

  /* Typography Blocks */
  .title {
    font-size: var(--text-2xl);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: var(--size-4);
  }

  .description {
    font-size: var(--text-xl);
    font-weight: 500;
    line-height: 1.3;
    color: var(--color-text-muted);
    margin-bottom: var(--size-16);
  }

  .card-title {
    font-size: var(--text-lg);
    font-weight: 600;
    line-height: 1.4;
  }

  /* Result Display */
  .total-salary-value {
    font-size: var(--text-xl);
    font-weight: 700;
    line-height: 1.3;
  }

  .total-salary-breakdown {
    font-size: var(--text-sm);
    line-height: 1.5;
  }

  .result-section {
    margin-bottom: var(--size-4);
  }

  .result-value {
    font-size: var(--text-lg);
    font-weight: 600;
    line-height: 1.4;
  }

  .result-explanation {
    font-size: var(--text-sm);
    line-height: 1.5;
  }

  .result-subtitle {
    font-size: var(--text-lg);
    font-weight: 600;
    line-height: 1.4;
  }

  /* Lists */
  .social-costs-list {
    list-style-type: none;
    padding-left: 0;
  }

  .social-costs-item {
    margin-bottom: var(--size-2);
  }

  .calculator-content {
    margin-top: 0;
  }
}

/* ==========================================================================
   UTILITIES LAYER - Single-purpose helpers from tokens
   ========================================================================== */

@layer utilities {
  /* Screen reader only - visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Spacing utilities */
  .mt-1 { margin-top: var(--size-1); }
  .mt-2 { margin-top: var(--size-2); }
  .mt-3 { margin-top: var(--size-3); }
  .mt-4 { margin-top: var(--size-4); }
  .mt-6 { margin-top: var(--size-6); }
  .mt-8 { margin-top: var(--size-8); }

  .mb-1 { margin-bottom: var(--size-1); }
  .mb-2 { margin-bottom: var(--size-2); }
  .mb-3 { margin-bottom: var(--size-3); }
  .mb-4 { margin-bottom: var(--size-4); }
  .mb-6 { margin-bottom: var(--size-6); }
  .mb-8 { margin-bottom: var(--size-8); }

  .p-2 { padding: var(--size-2); }
  .p-4 { padding: var(--size-4); }
  .p-6 { padding: var(--size-6); }

  /* Text utilities */
  .text-center { text-align: center; }
  .text-muted { color: var(--color-text-muted); }
  .text-primary { color: var(--color-primary); }
  .font-semibold { font-weight: 600; }
  .font-bold { font-weight: 700; }

  /* Layout utilities */
  .w-full { width: 100%; }
}
